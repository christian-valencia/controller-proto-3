(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const g={LS_X:0,LS_Y:1,RS_X:2,RS_Y:3},A={A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,VIEW:8,MENU:9,LS:10,RS:11,UP:12,DOWN:13,LEFT:14,RIGHT:15,HOME:16};class B{prev=new Map;now=new Map;deadzone=.18;triggerThreshold=.2;indexOfFirst=null;constructor(){console.log("ðŸŽ® GamepadManager initialized"),window.addEventListener("gamepadconnected",e=>{console.log("ðŸŽ® GAMEPAD CONNECTED:",e.gamepad.id),this.indexOfFirst===null&&(this.indexOfFirst=e.gamepad.index)}),window.addEventListener("gamepaddisconnected",e=>{console.log("ðŸŽ® GAMEPAD DISCONNECTED:",e.gamepad.id);const t=e.gamepad.index;this.indexOfFirst===t&&(this.indexOfFirst=null)})}first(){const e=navigator.getGamepads();for(const t of e)if(t)return t;return null}update(){this.prev=new Map(this.now),this.now.clear();const e=navigator.getGamepads();for(const t of e)t&&this.now.set(t.index,t)}btnValue(e,t){const s=e.buttons[A[t]];return s?t==="LT"||t==="RT"?s.value>=this.triggerThreshold?s.value:0:s.pressed?1:0:0}isDown(e,t=0){let s=this.now.get(t);if(!s){for(const[n,r]of this.now.entries())if(r){s=r;break}}return s?this.btnValue(s,e)>0:!1}justPressed(e,t=0){let s=this.now.get(t),n=this.prev.get(t);if(!s){for(const[d,a]of this.now.entries())if(a){s=a,n=this.prev.get(d);break}}if(!s)return!1;const r=this.btnValue(s,e)>0,i=n?this.btnValue(n,e)>0:!1;return r&&!i}justReleased(e,t=0){let s=this.now.get(t),n=this.prev.get(t);if(!s){for(const[d,a]of this.now.entries())if(a){s=a,n=this.prev.get(d);break}}if(!s)return!1;const r=this.btnValue(s,e)>0,i=n?this.btnValue(n,e)>0:!1;return!r&&i}getStick(e,t=0){let s=this.now.get(t);if(!s){for(const[F,S]of this.now.entries())if(S){s=S;break}}if(!s)return{x:0,y:0,magnitude:0};const n=e==="LEFT"?g.LS_X:g.RS_X,r=e==="LEFT"?g.LS_Y:g.RS_Y;let i=s.axes[n]??0,d=s.axes[r]??0;d=-d;const a=Math.hypot(i,d);if(a<this.deadzone)return{x:0,y:0,magnitude:0};const k=(a-this.deadzone)/(1-this.deadzone),D=k/(a||1);return{x:i*D,y:d*D,magnitude:k}}}const l={a:"A",A:"A",s:"B",S:"B",d:"X",D:"X",w:"Y",W:"Y",j:"A",J:"A",l:"B",L:"B",i:"Y",I:"Y",k:"X",K:"X",ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",q:"LB",Q:"LB",e:"RB",E:"RB",z:"LT",Z:"LT",c:"RT",C:"RT",v:"LS",V:"LS",n:"RS",N:"RS",Tab:"VIEW",Enter:"MENU",Escape:"HOME"};class j{keysDown=new Set;prevKeysDown=new Set;justPressedKeys=new Set;leftStick={x:0,y:0};rightStick={x:0,y:0};constructor(){window.addEventListener("keydown",e=>{(l[e.key]||e.key==="Tab")&&e.preventDefault();const t=this.keysDown.has(e.key);this.keysDown.add(e.key),t||this.justPressedKeys.add(e.key),this.updateSticks()}),window.addEventListener("keyup",e=>{(l[e.key]||e.key==="Tab")&&e.preventDefault(),this.keysDown.delete(e.key),this.updateSticks()})}updateSticks(){let e=0,t=0;this.keysDown.has("Control")&&((this.keysDown.has("a")||this.keysDown.has("A"))&&(e-=1),(this.keysDown.has("d")||this.keysDown.has("D"))&&(e+=1),(this.keysDown.has("w")||this.keysDown.has("W"))&&(t+=1),(this.keysDown.has("s")||this.keysDown.has("S"))&&(t-=1));let n=0,r=0;this.keysDown.has("Alt")&&((this.keysDown.has("j")||this.keysDown.has("J"))&&(n-=1),(this.keysDown.has("l")||this.keysDown.has("L"))&&(n+=1),(this.keysDown.has("i")||this.keysDown.has("I"))&&(r+=1),(this.keysDown.has("k")||this.keysDown.has("K"))&&(r-=1)),this.leftStick={x:e,y:t},this.rightStick={x:n,y:r}}update(){this.prevKeysDown=new Set(this.keysDown),this.justPressedKeys.clear()}isDown(e){for(const[t,s]of Object.entries(l))if(s===e&&this.keysDown.has(t))return!0;return!1}justPressed(e){for(const[t,s]of Object.entries(l))if(s===e&&this.justPressedKeys.has(t))return!0;return!1}justReleased(e){if(this.isDown(e))return!1;for(const[s,n]of Object.entries(l))if(n===e&&this.prevKeysDown.has(s))return!0;return!1}getStick(e){const t=e==="LEFT"?this.leftStick:this.rightStick,s=Math.hypot(t.x,t.y);return s>1?{x:t.x/s,y:t.y/s,magnitude:1}:{x:t.x,y:t.y,magnitude:s}}getKeyMappings(){return{...l}}}class K{gamepadManager;keyboardManager;constructor(){this.gamepadManager=new B,this.keyboardManager=new j}update(){this.gamepadManager.update(),this.keyboardManager.update()}isDown(e,t=0){return this.gamepadManager.isDown(e,t)||this.keyboardManager.isDown(e)}justPressed(e,t=0){return this.gamepadManager.justPressed(e,t)||this.keyboardManager.justPressed(e)}justReleased(e,t=0){return this.gamepadManager.justReleased(e,t)||this.keyboardManager.justReleased(e)}getStick(e,t=0){const s=this.gamepadManager.getStick(e,t);return s.magnitude>.1?s:this.keyboardManager.getStick(e)}get gamepad(){return this.gamepadManager}get keyboard(){return this.keyboardManager}firstGamepad(){return this.gamepadManager.first()}getActiveInputMethod(){const e=this.gamepadManager.first()!==null,t=this.keyboardManager.getStick("LEFT").magnitude>0||this.keyboardManager.getStick("RIGHT").magnitude>0||Object.values(this.keyboardManager.getKeyMappings()).some(s=>this.keyboardManager.isDown(s));return e&&t?"both":e?"gamepad":t?"keyboard":"none"}}const c=new K,h=document.getElementById("lock-screen"),L=document.getElementById("home"),E=document.getElementById("clock");document.getElementById("progress-ring");const M=document.getElementById("progress-circle"),O=[document.getElementById("launcher-xbox"),document.getElementById("launcher-steam"),document.getElementById("launcher-epic"),document.getElementById("launcher-battlenet"),document.getElementById("launcher-ea"),document.getElementById("launcher-riot")],p={LOCKED:"locked",UNLOCKED:"unlocked"};let w=p.LOCKED,u=!1,b=0;const T=600;let f=0;function R(){const o=new Date;let e=o.getHours();const t=o.getMinutes();e===0?e=12:e>12&&(e=e-12);const s=`${e}:${t.toString().padStart(2,"0")}`;E&&(E.textContent=s)}R();setInterval(R,1e3);function C(){w=p.UNLOCKED,h&&(h.style.transform="translateY(-720px)",h.style.transition="transform 0.4s ease",setTimeout(()=>{h.style.zIndex="1",L&&(L.style.zIndex="10")},400)),console.log("Screen unlocked!")}function x(o){if(M){const t=100.53-o/100*100.53;M.style.strokeDashoffset=t}}function I(){O.forEach((o,e)=>{o&&(e===f?o.classList.add("focused"):o.classList.remove("focused"))})}function y(o){o==="left"&&f>0?(f--,I()):o==="right"&&f<O.length-1&&(f++,I())}let m=0;const P=200;function v(){if(c.update(),w===p.LOCKED)if(c.isDown("A")){u||(u=!0,b=Date.now());const o=Date.now()-b,e=Math.min(o/T*100,100);x(e),o>=T&&(C(),u=!1)}else u&&(u=!1,x(0));if(w===p.UNLOCKED){const o=c.gamepad.justPressed("LEFT"),e=c.gamepad.justPressed("RIGHT"),t=c.keyboard.justPressed("LEFT"),s=c.keyboard.justPressed("RIGHT");(o||t)&&(console.log("LEFT pressed"),y("left")),(e||s)&&(console.log("RIGHT pressed"),y("right"));const n=c.getStick("LEFT"),r=Date.now();m<=r&&(n.x<-.5?(y("left"),m=r+P):n.x>.5&&(y("right"),m=r+P))}requestAnimationFrame(v)}requestAnimationFrame(v);console.log("Controller prototype initialized");console.log("Press and hold A (controller) or W (keyboard) to unlock");
