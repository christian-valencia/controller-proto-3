(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const G={LS_X:0,LS_Y:1,RS_X:2,RS_Y:3},de={A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,VIEW:8,MENU:9,LS:10,RS:11,UP:12,DOWN:13,LEFT:14,RIGHT:15,HOME:16};class ue{prev=new Map;now=new Map;deadzone=.18;triggerThreshold=.2;indexOfFirst=null;constructor(){console.log("ðŸŽ® GamepadManager initialized"),window.addEventListener("gamepadconnected",e=>{console.log("ðŸŽ® GAMEPAD CONNECTED:",e.gamepad.id),this.indexOfFirst===null&&(this.indexOfFirst=e.gamepad.index)}),window.addEventListener("gamepaddisconnected",e=>{console.log("ðŸŽ® GAMEPAD DISCONNECTED:",e.gamepad.id);const s=e.gamepad.index;this.indexOfFirst===s&&(this.indexOfFirst=null)})}first(){const e=navigator.getGamepads();for(const s of e)if(s)return s;return null}logControllers(){const e=navigator.getGamepads();console.log("ðŸŽ® Checking for controllers..."),console.log("ðŸŽ® navigator.getGamepads():",e);for(let s=0;s<e.length;s++){const n=e[s];n&&console.log(`ðŸŽ® Controller ${s}:`,n.id,"buttons:",n.buttons.length)}}update(){this.prev=new Map(this.now),this.now.clear();const e=navigator.getGamepads();for(const s of e)s&&(this.now.set(s.index,s),s.buttons[3]&&s.buttons[3].pressed&&console.log("ðŸŽ® GAMEPAD Y BUTTON PRESSED!",s.id))}btnValue(e,s){const n=e.buttons[de[s]];return n?s==="LT"||s==="RT"?n.value>=this.triggerThreshold?n.value:0:n.pressed?1:0:0}isDown(e,s=0){let n=this.now.get(s);if(!n){for(const[a,r]of this.now.entries())if(r){n=r,e==="Y"&&console.log("ðŸŽ® GamepadManager.isDown - Found gamepad at index",a,"instead of",s);break}}if(!n)return e==="Y"&&console.log("ðŸŽ® GamepadManager.isDown - No gamepad found at any index"),!1;const o=this.btnValue(n,e)>0;return e==="Y"&&console.log('ðŸŽ® GamepadManager.isDown("Y") =',o,"btnValue =",this.btnValue(n,e)),o}justPressed(e,s=0){let n=this.now.get(s),o=this.prev.get(s);if(!n){for(const[c,f]of this.now.entries())if(f){n=f,o=this.prev.get(c);break}}if(!n)return!1;const a=this.btnValue(n,e)>0,r=o?this.btnValue(o,e)>0:!1;return a&&!r}justReleased(e,s=0){let n=this.now.get(s),o=this.prev.get(s);if(!n){for(const[c,f]of this.now.entries())if(f){n=f,o=this.prev.get(c);break}}if(!n)return!1;const a=this.btnValue(n,e)>0,r=o?this.btnValue(o,e)>0:!1;return!a&&r}getStick(e,s=0){let n=this.now.get(s);if(!n){for(const[S,T]of this.now.entries())if(T){n=T;break}}if(!n)return{x:0,y:0,magnitude:0};const o=e==="LEFT"?G.LS_X:G.RS_X,a=e==="LEFT"?G.LS_Y:G.RS_Y;let r=n.axes[o]??0,c=n.axes[a]??0;c=-c;const f=Math.hypot(r,c);if(f<this.deadzone)return{x:0,y:0,magnitude:0};const y=(f-this.deadzone)/(1-this.deadzone),m=y/(f||1);return{x:r*m,y:c*m,magnitude:y}}}const C={a:"A",A:"A",s:"B",S:"B",d:"X",D:"X",w:"Y",W:"Y",j:"A",J:"A",l:"B",L:"B",i:"Y",I:"Y",k:"X",K:"X",ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",q:"LB",Q:"LB",e:"RB",E:"RB",z:"LT",Z:"LT",c:"RT",C:"RT",v:"LS",V:"LS",n:"RS",N:"RS",Tab:"VIEW",Enter:"MENU",Escape:"HOME"};class fe{keysDown=new Set;prevKeysDown=new Set;leftStick={x:0,y:0};rightStick={x:0,y:0};constructor(){window.addEventListener("keydown",e=>{(C[e.key]||e.key==="Tab")&&e.preventDefault(),this.keysDown.add(e.key),this.updateSticks()}),window.addEventListener("keyup",e=>{(C[e.key]||e.key==="Tab")&&e.preventDefault(),this.keysDown.delete(e.key),this.updateSticks()})}updateSticks(){let e=0,s=0;this.keysDown.has("Control")&&((this.keysDown.has("a")||this.keysDown.has("A"))&&(e-=1),(this.keysDown.has("d")||this.keysDown.has("D"))&&(e+=1),(this.keysDown.has("w")||this.keysDown.has("W"))&&(s+=1),(this.keysDown.has("s")||this.keysDown.has("S"))&&(s-=1));let o=0,a=0;this.keysDown.has("Alt")&&((this.keysDown.has("j")||this.keysDown.has("J"))&&(o-=1),(this.keysDown.has("l")||this.keysDown.has("L"))&&(o+=1),(this.keysDown.has("i")||this.keysDown.has("I"))&&(a+=1),(this.keysDown.has("k")||this.keysDown.has("K"))&&(a-=1)),this.leftStick={x:e,y:s},this.rightStick={x:o,y:a}}update(){this.prevKeysDown=new Set(this.keysDown)}isDown(e){for(const[s,n]of Object.entries(C))if(n===e&&this.keysDown.has(s))return!0;return!1}justPressed(e){if(!this.isDown(e))return!1;for(const[n,o]of Object.entries(C))if(o===e&&this.prevKeysDown.has(n))return!1;return!0}justReleased(e){if(this.isDown(e))return!1;for(const[n,o]of Object.entries(C))if(o===e&&this.prevKeysDown.has(n))return!0;return!1}getStick(e){const s=e==="LEFT"?this.leftStick:this.rightStick,n=Math.hypot(s.x,s.y);return n>1?{x:s.x/n,y:s.y/n,magnitude:1}:{x:s.x,y:s.y,magnitude:n}}getKeyMappings(){return{...C}}}class ge{gamepadManager;keyboardManager;constructor(){this.gamepadManager=new ue,this.keyboardManager=new fe}update(){this.gamepadManager.update(),this.keyboardManager.update()}isDown(e,s=0){return this.gamepadManager.isDown(e,s)||this.keyboardManager.isDown(e)}justPressed(e,s=0){return this.gamepadManager.justPressed(e,s)||this.keyboardManager.justPressed(e)}justReleased(e,s=0){return this.gamepadManager.justReleased(e,s)||this.keyboardManager.justReleased(e)}getStick(e,s=0){const n=this.gamepadManager.getStick(e,s);return n.magnitude>.1?n:this.keyboardManager.getStick(e)}get gamepad(){return this.gamepadManager}get keyboard(){return this.keyboardManager}firstGamepad(){return this.gamepadManager.first()}getActiveInputMethod(){const e=this.gamepadManager.first()!==null,s=this.keyboardManager.getStick("LEFT").magnitude>0||this.keyboardManager.getStick("RIGHT").magnitude>0||Object.values(this.keyboardManager.getKeyMappings()).some(n=>this.keyboardManager.isDown(n));return e&&s?"both":e?"gamepad":s?"keyboard":"none"}}document.getElementById("windows-shell");document.getElementById("lock-screen");const Q=document.getElementById("system-tray"),Z=document.getElementById("switcher"),H=document.getElementById("clock"),ee=document.getElementById("clock2"),te=document.getElementById("auth");document.getElementById("progress-ring");const B=document.getElementById("progress-circle"),he=document.getElementById("green"),pe=document.getElementById("blue"),me=document.getElementById("orange");let I=[he,pe,me],E=["green","blue","orange"];const i=new ge;let se=0;window.addEventListener("keydown",t=>{if((t.key.toLowerCase()==="s"||t.key.toLowerCase()==="l")&&b===p.SHELL&&v){const e=Date.now();e-se>200&&(console.log(`Direct B button handler - closing ${v}`),F(v),se=e)}});const p={LOCKED:"locked",SHELL:"shell",MENU:"menu",APP:"app"};let b=p.LOCKED,g=0,u=0;const D=300;let A=!1,ne=0;const ye=300;let l="preview",L=0,v=null;const P=["library","settings","notifications","gallery"];let w=0,h=0;const ve=4,Y=[5,5,12,20];let x=!1,_=0;const we=700;let O=!1,q=0;const oe=700;window.addEventListener("keydown",t=>{t.key.toLowerCase()==="f"&&V()});function V(){document.fullscreenElement?document.exitFullscreen().catch(console.error):document.documentElement.requestFullscreen().catch(console.error)}function ie(){i.update(),Le(),De(),requestAnimationFrame(ie)}function Le(){switch(b){case p.LOCKED:Ee();break;case p.SHELL:je(),ke();break;case p.MENU:He();break;case p.APP:Ue();break;default:console.warn("Unknown UI state:",b);break}i.justPressed("VIEW")&&V(),i.justPressed("MENU")&&b===p.LOCKED&&V()}function Ee(){if(b!==p.LOCKED)return;const t=i.isDown("Y");if(t&&!x)x=!0,_=Date.now(),B&&(B.style.transition="none",B.style.strokeDashoffset="100.53");else if(t&&x){const e=Date.now()-_,s=Math.min(e/we,1);if(B){const o=100.53*(1-s);B.style.strokeDashoffset=o.toString()}s>=1&&be()}else!t&&x&&le()}function be(){console.log("Hold complete! Authentication action triggered."),A=!1,U(p.SHELL),W(),g=0,l="preview";const t=document.getElementById("focus"),e=document.getElementById("green-preview");e&&(e.classList.add("preview-scaled"),A=!0),t&&(t.classList.add("visible"),k()),te&&te.classList.add("slide-out"),le(),d.confirmation(),console.log("Lock screen unlocked! Shell interactions now active.")}function le(){b===p.LOCKED&&(x=!1,_=0,B&&(B.style.transition="stroke-dashoffset 0.2s ease",B.style.strokeDashoffset="100.53"))}function ke(){if(b!==p.SHELL||!A||l!=="preview")return;const t=i.isDown("X");t&&!O?(O=!0,q=Date.now(),console.log("X button hold started - will scale down preview in",oe+"ms")):t&&O?Date.now()-q>=oe&&Se():!t&&O&&ae()}function Se(){console.log("X button hold complete! Scaling down preview and reordering to leftmost position.");const e=E.map(s=>document.getElementById(`${s}-preview`))[g];if(e&&e.classList.contains("preview-scaled")){e.classList.remove("preview-scaled"),A=!1;const s=document.getElementById("running-apps");s&&s.classList.add("visible");const n=document.getElementById("shell-nav");if(n&&n.classList.add("visible"),g!==0){console.log(`Reordering: Moving ${E[g]} to leftmost position`);const o=I[g],a=E[g];I.splice(g,1),E.splice(g,1),I.unshift(o),E.unshift(a);const r=document.getElementById("running-apps");r&&(r.innerHTML="",I.forEach(c=>{c&&r.appendChild(c)})),g=0,console.log("New app order:",E)}ce(),W(),k(),d.confirmation()}ae()}function ae(){O=!1,q=0}function De(){Be(),re()}function re(){const t=b!==p.LOCKED;Q&&(Q.className=t?"unlocked":"locked"),Z&&(Z.className=t?"unlocked":"locked"),H&&(t?H.classList.add("slide-out"):H.classList.remove("slide-out"))}function Be(){const t=new Date;let e=t.getHours();const s=t.getMinutes();e===0?e=12:e>12&&(e=e-12);const n=`${e}:${s.toString().padStart(2,"0")}`;H&&(H.textContent=n),ee&&(ee.textContent=n)}async function N(t=1,e=200){const s=i.firstGamepad();if(!s)return;const n=s.vibrationActuator;if(n)try{await n.playEffect("dual-rumble",{duration:e,strongMagnitude:t,weakMagnitude:t})}catch(o){console.warn("Rumble not supported:",o)}}const d={lightTap:()=>N(.2,50),confirmation:()=>N(.8,200),navigation:()=>N(.1,30),error:()=>N(.6,100),menuToggle:()=>N(.4,150),selectionChange:()=>N(.15,25)};function U(t){console.log(`UI State: ${b} â†’ ${t}`),b=t;const e=document.getElementById("blur-container");e&&(t!==p.LOCKED?e.classList.add("visible"):e.classList.remove("visible")),re(),W()}function M(t){const e=g;t==="right"?g=(g+1)%I.length:t==="left"&&(g=(g-1+I.length)%I.length),console.log(`App Navigation: ${E[e]} â†’ ${E[g]}`),W(),d.selectionChange()}function R(t){const e=L;t==="right"?L=(L+1)%P.length:t==="left"&&(L=(L-1+P.length)%P.length),console.log(`Shell Nav Navigation: ${P[e]} â†’ ${P[L]}`),k(),d.selectionChange()}function W(){b===p.SHELL&&(I.forEach((t,e)=>{t&&(e===g?(t.classList.add("app-active"),t.classList.remove("app-rest")):(t.classList.add("app-rest"),t.classList.remove("app-active")))}),ce())}function ce(){const t=E.map(e=>document.getElementById(`${e}-preview`));switch(t.forEach(e=>{e&&e.classList.remove("preview-center","preview-left","preview-right","preview-far-left","preview-far-right","preview-scaled")}),A=!1,g){case 0:t[0]?.classList.add("preview-center"),t[1]?.classList.add("preview-right"),t[2]?.classList.add("preview-far-right");break;case 1:t[0]?.classList.add("preview-left"),t[1]?.classList.add("preview-center"),t[2]?.classList.add("preview-right");break;case 2:t[0]?.classList.add("preview-far-left"),t[1]?.classList.add("preview-left"),t[2]?.classList.add("preview-center");break}k()}function Ie(){const e=E.map(s=>document.getElementById(`${s}-preview`))[g];if(e)if(A)console.log("Preview already scaled up. Use VIEW button hold to scale down.");else{e.classList.add("preview-scaled"),A=!0;const s=document.getElementById("running-apps");s&&s.classList.remove("visible");const n=document.getElementById("shell-nav");n&&n.classList.remove("visible"),k(),d.confirmation()}}function k(){const t=document.getElementById("focus");if(t)if(t.classList.remove("focus-preview","focus-nav","focus-shell-surface","focus-shell-library","focus-shell-settings"),l==="preview"){K();const s=E.map(o=>document.getElementById(`${o}-preview`))[g];if(!s)return;s.classList.contains("preview-scaled")?(t.style.width="100vw",t.style.height="100vh"):(t.style.width="50vw",t.style.height="calc(50vh + 64px)"),t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.classList.add("focus-preview")}else if(l==="shell-nav"){t.classList.add("focus-nav");const e=document.getElementById(P[L]);if(!e)return;const s=e.getBoundingClientRect(),n=document.getElementById("windows-shell").getBoundingClientRect();t.style.width="64px",t.style.height="64px",t.style.top=`${s.top-n.top+s.height/2}px`,t.style.left=`${s.left-n.left+s.width/2}px`,t.style.transform="translate(-50%, -50%)",K(P[L])}else l==="shell-surface"&&(K(),Te())}function K(t=null){const e={library:document.getElementById("label-library"),settings:document.getElementById("label-settings"),notifications:document.getElementById("label-notifications"),gallery:document.getElementById("label-gallery")},s=document.getElementById("shell-nav");if(!t||!s){Object.values(e).forEach(y=>{y&&y.classList.remove("active","faded")});return}const n=document.getElementById(t);if(!n)return;const o=n.getBoundingClientRect(),a=s.getBoundingClientRect(),r=o.top-a.top,c=o.left-a.left,f=o.width;Object.entries(e).forEach(([y,m])=>{if(m)if(y===t){m.classList.add("active"),m.classList.remove("faded");const S=r-16-20,T=c+f/2;m.style.top=`${S}px`,m.style.left=`${T}px`,m.style.transform="translateX(-50%)"}else m.classList.remove("active"),m.classList.add("faded")})}function Te(){const t=document.getElementById("focus");t&&(t.classList.remove("focus-preview","focus-nav"),t.classList.add("focus-shell-surface"),t.style.width="200px",t.style.height="32px",t.style.top="92px",t.style.left="48px",t.style.transform="none",t.style.maxWidth="none",t.style.maxHeight="none",t.style.minWidth="none",t.style.minHeight="none")}function j(){const t=document.getElementById("focus"),e=document.querySelectorAll(".launcher-row-container"),s=document.querySelector(".library-content");if(!t||e.length===0)return;t.style.opacity="0",document.querySelectorAll(".launcher-app").forEach(o=>o.classList.remove("focused"));const n=e[h];if(n){const r=n.querySelector(".launchers").querySelectorAll(".launcher-app")[w];r&&r.classList.add("focused");const c=Y[h];if(c>5){let y=0;if(w>=3){y=-(w-2)*194;const S=-(c-5)*194;y=Math.max(y,S)}n.style.transition="transform 0.3s ease",n.style.transform=`translateX(${y}px) translateY(${h>=2?-264*(h-1):0}px)`}else n.style.transition="transform 0.3s ease",n.style.transform=`translateX(0) translateY(${h>=2?-264*(h-1):0}px)`}if(s){let o=0;h>=2&&(o=-264*(h-1)),e.forEach((r,c)=>{c!==h&&(r.style.transition="transform 0.3s ease",r.style.transform=`translateY(${o}px)`)});const a=document.querySelector(".library-main-title");a&&(a.style.transform=`translateY(${o}px)`)}}function $(t){const e=Y[h];t==="left"&&w>0?(w--,j()):t==="right"&&w<e-1?(w++,j()):t==="up"&&h>0?(h--,w=Math.min(w,Y[h]-1),j()):t==="down"&&h<ve-1&&(h++,w=Math.min(w,Y[h]-1),j())}function X(t){const e=document.getElementById(`shell-${t}`),s=document.getElementById("focus"),n=document.getElementById("shell-nav"),o=document.getElementById("running-apps");if(!e)return;e.classList.add("visible"),console.log(`Shell ${t.charAt(0).toUpperCase()+t.slice(1)} sliding in from bottom`),s&&s.classList.add("off-screen"),n&&n.classList.add("fade-out"),o&&o.classList.remove("visible"),document.querySelectorAll(".preview-container").forEach(r=>{r.classList.add("hide-right")}),v=t,t==="library"&&(l="library-launchers",w=0,h=0,j())}function F(t){const e=document.getElementById(`shell-${t}`),s=document.getElementById("focus"),n=document.getElementById("shell-nav"),o=document.getElementById("running-apps");if(!e)return;if(e.classList.remove("visible"),console.log(`Shell ${t.charAt(0).toUpperCase()+t.slice(1)} sliding out to bottom`),s&&s.classList.remove("off-screen"),n&&n.classList.remove("fade-out"),o&&o.classList.add("visible"),document.querySelectorAll(".preview-container").forEach(r=>{r.classList.remove("hide-right")}),v=null,l==="library-launchers"){w=0,h=0,document.querySelectorAll(".launcher-app").forEach(c=>{c.classList.remove("focused")}),document.querySelectorAll(".launchers").forEach(c=>{c.style.transform="translateX(0) translateY(0)"});const r=document.querySelector(".library-main-title");r&&(r.style.transform="translateY(0)")}l="shell-nav",k()}function Pe(){X("library")}function Ae(){F("library")}function Ce(){X("settings")}function Ne(){F("settings")}function Me(){X("notifications")}function Re(){F("notifications")}function xe(){X("gallery")}function Oe(){F("gallery")}function je(){console.log("Shell inputs active - ready for desktop interactions!");const t=Date.now(),e={LEFT:i.isDown("LEFT"),RIGHT:i.isDown("RIGHT"),LB:i.isDown("LB"),RB:i.isDown("RB"),leftJust:i.justPressed("LEFT"),rightJust:i.justPressed("RIGHT"),lbJust:i.justPressed("LB"),rbJust:i.justPressed("RB")};Object.values(e).some(S=>S)&&console.log("Input detected:",e);const n=i.justPressed("LEFT"),o=i.justPressed("RIGHT"),a=i.justPressed("LB"),r=i.justPressed("RB");(n||o||a||r)&&console.log("Navigation input detected:",{leftPressed:n,rightPressed:o,lbPressed:a,rbPressed:r}),(i.justPressed("LEFT")||i.isDown("LEFT")&&t-u>D)&&(console.log("LEFT input detected"),l==="library-launchers"?(console.log("Navigating launchers left"),$("left"),u=t):l!=="shell-surface"?(l==="preview"?(console.log("Navigating apps left"),M("left")):l==="shell-nav"&&(console.log("Navigating shell-nav left"),R("left")),u=t):console.log("LEFT navigation blocked - currently in shell surface:",v)),(i.justPressed("RIGHT")||i.isDown("RIGHT")&&t-u>D)&&(console.log("RIGHT input detected"),l==="library-launchers"?(console.log("Navigating launchers right"),$("right"),u=t):l!=="shell-surface"?(l==="preview"?(console.log("Navigating apps right"),M("right")):l==="shell-nav"&&(console.log("Navigating shell-nav right"),R("right")),u=t):console.log("RIGHT navigation blocked - currently in shell surface:",v)),(i.justPressed("LB")||i.isDown("LB")&&t-u>D)&&(console.log("LB input detected"),l!=="shell-surface"?(l==="preview"?(console.log("Navigating apps left"),M("left")):l==="shell-nav"&&(console.log("Navigating shell-nav left"),R("left")),u=t):console.log("LB navigation blocked - currently in shell surface:",v)),(i.justPressed("RB")||i.isDown("RB")&&t-u>D)&&(console.log("RB input detected"),l!=="shell-surface"?(l==="preview"?(console.log("Navigating apps right"),M("right")):l==="shell-nav"&&(console.log("Navigating shell-nav right"),R("right")),u=t):console.log("RB navigation blocked - currently in shell surface:",v));const c=i.getStick("LEFT"),f=Date.now();c.magnitude>.6&&f-u>D&&(l!=="shell-surface"?c.x>.6?(l==="preview"?M("right"):l==="shell-nav"&&R("right"),u=f):c.x<-.6&&(l==="preview"?M("left"):l==="shell-nav"&&R("left"),u=f):console.log("Stick navigation blocked - currently in shell surface:",v)),c.magnitude>.6&&f-u>D&&(l!=="shell-surface"?c.y>.6?(console.log("Analog stick UP detected - moving focus back to preview"),l==="shell-nav"&&(l="preview",k(),u=f)):c.y<-.6&&(console.log("Analog stick DOWN detected - moving focus to shell-nav"),l==="preview"&&(l="shell-nav",k(),u=f)):console.log("Analog stick vertical navigation blocked - currently in shell surface:",v)),(i.justPressed("DOWN")||i.isDown("DOWN")&&t-u>D)&&(l==="library-launchers"?(console.log("Navigating launchers down"),$("down"),u=t):l!=="shell-surface"?(console.log("DOWN input detected - moving focus to shell-nav"),l==="preview"&&(l="shell-nav",k(),u=t)):console.log("DOWN input blocked - currently in shell surface:",v)),(i.justPressed("UP")||i.isDown("UP")&&t-u>D)&&(l==="library-launchers"?(console.log("Navigating launchers up"),$("up"),u=t):l!=="shell-surface"?(console.log("UP input detected - moving focus back to preview"),l==="shell-nav"&&(l="preview",k(),u=t)):console.log("UP input blocked - currently in shell surface:",v)),i.justPressed("UP")&&(console.log("Navigate UP - future functionality"),d.navigation()),i.justPressed("DOWN")&&(console.log("Navigate DOWN - future functionality"),d.navigation());const y=Date.now();if(i.isDown("A")&&y-ne>ye&&(ne=y,l==="preview"?Ie():l==="shell-nav"?L===0?(console.log("Opening Library..."),Pe(),d.confirmation()):L===1?(console.log("Opening Settings..."),Ce(),d.confirmation()):L===2?(console.log("Opening Notifications..."),Me(),d.confirmation()):L===3&&(console.log("Opening Gallery..."),xe(),d.confirmation()):l==="shell-surface"&&(console.log("A button pressed in shell surface:",v),d.lightTap())),i.justPressed("B")){const S=document.getElementById("shell-library"),T=document.getElementById("shell-settings"),z=document.getElementById("shell-notifications"),J=document.getElementById("shell-gallery");console.log("B button pressed via InputManager"),S&&S.classList.contains("visible")?(console.log("Shell: B button - Closing Library"),Ae(),d.lightTap()):T&&T.classList.contains("visible")?(console.log("Shell: B button - Closing Settings"),Ne(),d.lightTap()):z&&z.classList.contains("visible")?(console.log("Shell: B button - Closing Notifications"),Re(),d.lightTap()):J&&J.classList.contains("visible")?(console.log("Shell: B button - Closing Gallery"),Oe(),d.lightTap()):(console.log("Shell: B button - Back/Cancel"),d.lightTap())}i.justPressed("Y")&&(console.log("Shell: Y button - Alternative action"),d.lightTap()),i.justPressed("LT")&&(console.log("Shell: LT - Previous app"),d.menuToggle()),i.justPressed("RT")&&(console.log("Shell: RT - Next app"),d.menuToggle());const m=i.getStick("RIGHT");m.magnitude>.3&&console.log(`Shell: Right stick scrolling - x:${m.x.toFixed(2)}, y:${m.y.toFixed(2)}`),i.justPressed("LS")&&(console.log("Shell: Left stick click - Quick action"),d.lightTap()),i.justPressed("RS")&&(console.log("Shell: Right stick click - Context menu"),d.lightTap()),i.justPressed("MENU")&&(console.log("Shell: Opening main menu"),U(p.MENU),d.menuToggle())}function He(){console.log("Menu inputs active - navigating menu system!"),i.justPressed("UP")&&(console.log("Menu: Navigate up"),d.selectionChange()),i.justPressed("DOWN")&&(console.log("Menu: Navigate down"),d.selectionChange()),i.justPressed("A")&&(console.log("Menu: Select item"),d.confirmation()),i.justPressed("B")&&(console.log("Menu: Back to shell"),U(p.SHELL),d.menuToggle()),i.justPressed("MENU")&&(console.log("Menu: Closing menu"),U(p.SHELL),d.menuToggle())}function Ue(){console.log("App inputs active - app-specific controls!"),i.justPressed("B")&&(console.log("App: Back to shell"),U(p.SHELL),d.lightTap())}requestAnimationFrame(ie);
